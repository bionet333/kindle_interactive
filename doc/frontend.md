# Документация: Frontend (Yew)

Frontend-часть приложения реализована с использованием фреймворка Yew, который позволяет писать веб-интерфейсы на Rust и компилировать их в WebAssembly (WASM).

## Структура (`src/`)

*   `main.rs`: Точка входа для frontend-приложения.
*   `app.rs`: Содержит всю логику и разметку пользовательского интерфейса в едином компоненте `App`.

--- 

### `app.rs` - Компонент `App`

Это главный компонент, реализованный как функциональный компонент с использованием хуков.

#### Состояние (State)

Состояние компонента управляется с помощью хука `use_state`:

*   `editor_content`: Содержимое текстового редактора.
*   `url_input`: Содержимое поля для ввода URL.
*   `server_info`: Информация об IP-адресе сервера.
*   `save_status`, `fetch_status`: Статусы операций для обратной связи с пользователем.
*   `is_saving`, `is_fetching`: Флаги для блокировки кнопок во время выполнения асинхронных операций.
*   `auto_send_on_copy`: Состояние чекбокса для мониторинга буфера обмена.

#### Взаимодействие с Backend

Frontend взаимодействует с бэкендом двумя способами:

1.  **Tauri Commands (`invoke`)**: Используется для *управляющих* действий и *первоначальной* загрузки данных. Это вызовы к ядру Tauri.
    *   Примеры: `get_text` и `get_server_info` вызываются один раз при загрузке компонента. `set_clipboard_monitoring` вызывается при изменении состояния чекбокса.

2.  **HTTP-запросы (`fetch`)**: Используется для *обновления основного контента*. Фронтенд отправляет стандартные веб-запросы на локальный Axum-сервер, запущенный на порту `5001`.
    *   **Сохранение текста**: При нажатии кнопки "Сохранить" отправляется `POST`-запрос на `http://localhost:5001/api/content` с JSON-телом `{ "new_text": "..." }`.
    *   **Отправка URL**: При отправке URL отправляется `POST`-запрос на `http://localhost:5001/api/url` с JSON-телом `{ "url": "..." }`.

Такое разделение позволяет использовать стандартные веб-инструменты (например, вкладку Network в DevTools) для отладки основного потока данных.

#### Жизненный цикл и эффекты

*   **`use_effect_with((), ...)`**: Этот хук выполняется один раз после первого рендера. Внутри запускается асинхронная задача, которая через `invoke` получает начальный текст и информацию о сервере для отображения в UI.

#### Обработчики событий (Callbacks)

*   **`on_input`**: Обновляет состояние `editor_content` при каждом изменении в `textarea`.
*   **`on_url_input`**: Обновляет состояние `url_input` при вводе в поле URL.
*   **`on_save`**: При клике на кнопку "Сохранить" запускает асинхронную задачу, которая выполняет `fetch` POST-запрос к `/api/content`.
*   **`on_fetch_url`**: При клике на кнопку "Отправить" выполняет `fetch` POST-запрос к `/api/url`.
*   **`on_auto_send_toggle`**: При изменении чекбокса вызывает `invoke('set_clipboard_monitoring', ...)` для включения/выключения мониторинга на стороне бэкенда.
